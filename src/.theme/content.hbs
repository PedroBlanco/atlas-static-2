<template>
    <div class="content-window">
        <div class="container-fluid">
        {{#if frontMatter.youtube}}
            <div class="row">
                <div class="col-md-4">
                    <h4  aria-label="Título">{{frontMatter.title}}</h4>
                    <br>
                    <div aria-label="Texto de la página">{{{content}}}</div>

                    <div style="width: 300px;"><canvas id="radar"></canvas></div>

                    <script src="js/radar.js"></script>
                    
                </div>
                <div class="col-md-8">            
                    <div class="video embed-responsive embed-responsive-16by9" aria-label="Vídeo">
                        <iframe width=960 height=540 src="https://www.youtube.com/embed/{{frontMatter.youtube}}"
                        frameborder="0" allow="autoplay; encrypted-media" allowfullscreen title="Marco de vídeo"></iframe>
                    </div>
                    {{#if frontMatter.tags}}
                    <div class="small" aria-label="Etiquetas">Etiquetas: <i>{{frontMatter.tags}}</i></div>
                    <br>
                    {{/if}}
                </div>
            </div>
        {{else}}
            <div class="col-md-12">
                <div arial-label="Datos del mapa">
                    <h1>Mapa: {{frontMatter.title}}</h1>
                    <h2>Autor/a: <a href="{{frontMatter.autor_enlace}}">{{frontMatter.autor_nombre}} {{frontMatter.autor_apellidos}}</a></h2>
                    <ul class="nav nav-tabs" id="myTab" role="tablist" aria-label="Lista de pestañas">
                        {{#if frontMatter.URL }}
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="mapa-tab" data-toggle="tab" href="#mapa" role="tab" aria-controls="mapa" aria-selected="true" aria-label="Fichas del mapa">Fichas del Mapa</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link active" id="descripcion-tab" data-toggle="tab" href="#descripcion" role="tab" aria-controls="descripcion" aria-selected="false">Descripción</a>
                        </li>
                        {{else}}
                        <li class="nav-item" role="presentation">
                            <a class="nav-link active" id="descripcion-tab" data-toggle="tab" href="#descripcion" role="tab" aria-controls="descripcion" aria-selected="false">Descripción</a>
                        </li>
                        {{/if}}
                    {{!-- <li class="nav-item" role="presentation">
                        <a class="nav-link" id="metadatos-tab" data-toggle="tab" href="#metadatos" role="tab" aria-controls="metadatos" aria-selected="false">Metadatos</a>
                    </li> --}}
                    </ul>
                    <div class="tab-content" id="myTabContent" aria-label="Pestañas">
                        {{#if frontMatter.URL }}
                        <div class="tab-pane fade" id="mapa" role="tabpanel" aria-labelledby="mapa-tab">
                            <iframe title="Ficha del mapa {{frontMatter.title}}" src="{{frontMatter.URL}}?widget=true&headers=false&chrome=false" class="embedded-frame" title="Ficha embebida" scrolling="no"></iframe>
                        </div>
                        <div class="tab-pane fade show active" id="descripcion" role="tabpanel" aria-labelledby="descripcion-tab">
                        {{else}}
                        <div class="tab-pane fade show active" id="descripcion" role="tabpanel" aria-labelledby="descripcion-tab">
                        {{/if}}
                            <div class="card">
                            <div class="card-body">
                            <p class="card-text lead" aria-label="Descripción del mapa">{{frontMatter.desc}}</p>
                            <p aria-label="Resumen del mapa">{{{content}}}</p>
                            {{#if frontMatter.r_version}}
                            <h2 id="nivel-de-criticidad-detectado">Criticidad: niveles detectados</h2>
                            <p>(1 mín- 5 máx, siendo 1 el estado más crítico)</p>
                            <table class="table table-striped table-bordered">
                                <thead>
                                    <tr>
                                    <th>Documentación
                                    </th>
                                    <th>Difusión
                                    </th>
                                    <th>Expertise(Pericia) de la organización en el conocimiento
                                    </th>
                                    <th>Dificultad de recuperación en caso de pérdida
                                    </th>
                                    <th>Riesgo de pérdida a corto plazo
                                    </th>
                                    <th>Propiedad/control del conocimiento
                                    </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                    <td>{{frontMatter.r_documentacion}}
                                    </td>
                                    <td>{{frontMatter.r_difusion}}
                                    </td>
                                    <td>{{frontMatter.r_pericia}}
                                    </td>
                                    <td>{{frontMatter.r_recuperacion}}
                                    </td>
                                    <td>{{frontMatter.r_riesgo}}
                                    </td>
                                    <td>{{frontMatter.r_propiedad}}
                                    </td>
                                    </tr>
                                </tbody>
                            </table>
                            <div style="width: 600px;"><canvas id="radar_mapa"></canvas></div>
                            <script src="js/radar_mapa.js"></script>
                            <script>
                                const r_data = [
                                    { label: 'Documentación', count: {{frontMatter.r_documentacion}} },
                                    { label: 'Difusión', count: {{frontMatter.r_difusion}} },
                                    { label: 'Expertise(Pericia) de la organización', count: {{frontMatter.r_pericia}} },
                                    { label: 'Dificultad de recuperación en caso de pérdida', count: {{frontMatter.r_recuperacion}} },
                                    { label: 'Riesgo de pérdida a corto plazo', count: {{frontMatter.r_riesgo}} },
                                    { label: 'Propiedad/control del conocimiento', count: {{frontMatter.r_propiedad}} }
                                ];
                                radar_mapa ( r_data, 'radar_mapa', '{{frontMatter.title}}' );
                            </script>
                            {{/if}}
                            {{#unless frontMatter.URL }}
                            <p class="card-text text-muted" aria-label="Mapa sin fichas">Este mapa no tiene fichas públicas <em>todavía</em>.</p>
                            {{else}}
                            <a href="{{frontMatter.URL}}" target="_blank" class="card-link" aria-label="Enlace a las fichas">Enlace a las fichas de este mapa.</a>
                            {{/unless}}
                            <hr>
                            <h4 class="card-title">Metadatos</h4>
                            <table class="table table-striped table-bordered" aria-label="Tabla de metadatos">
                                <thead aria-label="Cabecera de tabla">
                                    <tr aria-label="Fila de cabecera">
                                        <th scope="col" align="center">
                                            <abbr title="Fecha de creación (aproximada)">Creación</abbr>
                                        </th>
                                        <th scope="col" align="center">
                                            <abbr title="Fecha de la última actualización (aproximada)">Actualización</abbr>
                                        </th>
                                        <th>
                                            <abbr title="Administración Pública en la que se encuadra el mapa">Administración</abbr> <a href="https://ws168.juntadeandalucia.es/wikigestionC/index.php?title=Glosario_de_t%C3%A9rminos_de_Conocimiento_Cr%C3%ADtico#Administracion">?</a>
                                        </th>
                                        <th scope="col" align="center">
                                            <abbr title="Punto de desarrollo se encuentra el mapa">Estado/fase de desarrollo</abbr> <a href="https://ws168.juntadeandalucia.es/wikigestionC/index.php?title=Glosario_de_t%C3%A9rminos_de_Conocimiento_Cr%C3%ADtico#Fases">?</a>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody aria-label="Datos de tabla">
                                    <tr aria-label="Fila de datos">
                                        <td align="center" aria-label="Fecha de creación">
                                            {{frontMatter.creation}}
                                        </td>
                                        <td align="center" aria-label="Fecha de actualización">
                                            {{frontMatter.update}}
                                        </td>
                                        <td aria-label="Administración">
                                            {{frontMatter.administration}}
                                        </td>
                                        <td align="center" aria-label="Estado o fase de desarrollo">
                                            {{frontMatter.phase}}
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            </div>
                            </div>
                        </div>
                        {{!-- <div class="tab-pane fade" id="metadatos" role="tabpanel" aria-labelledby="metadatos-tab">
                        </div> --}}
                    </div>
                </div>
            </div>
        {{/if}}
        </div>
    </div>
</template>
